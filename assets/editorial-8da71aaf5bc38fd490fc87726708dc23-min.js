define("GotoLinkBuilderModule",["jquery"],function(e){var a={contentSelector:null,siteID:1,locale:"en_US"},d=function(c,b){this.$el=e("#"+c);if(0===this.$el.length)return console.log("Fail to find moduleId: "+c),!1;e.extend(a,b);this.$panel=this.$el.find(a.contentSelector);if(0===this.$panel.length)return console.log("no click elements"),!1;this.detectBrand();this.readClickUrls(this.$panel)};d.prototype.readClickUrls=function(c){for(i=0;i<c.length;i++){var b=e(c[i]).find("figure").attr("data-href")||"";""!==b&&(b=this.validURL(b)?b:"https://book."+a.brandName+".com/goto/?brand\x3d"+a.brand+"\x26language\x3d"+a.lang+"\x26pos\x3d"+a.pos+"\x26account_id\x3d"+a.account_id+"\x26externalRequestId\x3d\x26channel\x3dweb\x26pickup_datetime\x3d"+this.getFormattedDate(4)+"T10%3A00%3A00Z\x26dropoff_datetime\x3d"+this.getFormattedDate(7)+"T10%3A00%3A00Z\x26use_tresa_id\x3d\x26is_mobile_app\x3dfalse\x26autosuggest_api\x3dautosuggestor\x26is_cms_deeplink\x3dtrue\x26pickupQuery\x3d"+b+"\x26TMMID\x3d\x26Chnl\x3d\x26utm_content\x3d\x26presearch\x3dtrue\x26pickup_location\x3d"+b+"\x26dropoff_location\x3d"+b,e(c[i]).find("figure").attr("data-href",btoa(b)),this.addListeners(e(c[i]).find("figure")))}};d.prototype.addListeners=function(a){a.on("click keyup",function(a){a.preventDefault();if("keyup"!=a.type||13===a.which){a=a.currentTarget.getAttribute("data-href");try{a=atob(a)}catch(f){console.log(f)}window.location.href=a}})};d.prototype.getFormattedDate=function(a){var b=new Date;b.setDate(b.getDate()+a);a=("0"+(b.getMonth()+1)).slice(-2);var c=("0"+b.getDate()).slice(-2);return b.getFullYear()+"-"+a+"-"+c};d.prototype.validURL=function(a){return/(http|https):\/\/(\w+:{0,1}\w*)?(\S+)(:[0-9]+)?(\/|\/([\w#!:.?+=&%!\-\/]))?/.test(a)?!0:!1};d.prototype.detectBrand=function(){""!==a.lang&&(a.lang=a.locale.split("_")[0],a.pos=a.locale.split("_")[1]);switch(a.siteID){case "70801":a.brandName="carrentals";a.brand="CR";a.account_id="1";break;case "70820":a.brandName="autoescape";a.brand="AE";a.account_id="9782572";break;case "70806":a.brandName="cardelmar",a.brand="CDM",a.account_id="DE"===a.pos?"5317733":"10328223"}};return d});
//# sourceMappingURL=editorial.js.map